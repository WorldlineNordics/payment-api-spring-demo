var Worldline=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);t.exports={PaymentService:r.PaymentService}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=this;this.method="POST",this.timeout=6e4,this.version="worldlinejs-1.1.0",this.paymentMethodApi=function(){return e.endpoint.concat("/api/v1/paymentmethods")},this.encryptedPayload=t.encryptedPayload,this.endpoint=this.getEndpoint(t)}return t.prototype.setRequestTimeout=function(t){return t>=2e3&&(this.timeout=t),this},t.prototype.setWorldlineSessionData=function(t){return this.worldlineSessionData=t,this},t.prototype.card=function(t){return"cardNumber"in t&&(this.cardNumber=t.cardNumber),"cardHolderName"in t&&(this.cardHolderName=t.cardHolderName),"cardExpiryMonth"in t&&(this.expDateMonth=t.cardExpiryMonth),"cardExpiryYear"in t&&(this.expDateYear=t.cardExpiryYear),"cardCVC"in t&&(this.cvCode=t.cardCVC),this},t.prototype.initAuth=function(){return this.endpointUrl=this.endpoint.concat("/api/v1/initauthentication"),this},t.prototype.continueAuth=function(){return this.endpointUrl=this.endpoint.concat("/api/v1/continueauthentication"),this},t.prototype.cardPayment=function(){return this.endpointUrl=this.endpoint.concat("/api/v1/payments"),this},t.prototype.redirectPayment=function(){return this.endpointUrl=this.endpoint.concat("/api/v1/redirectpayments"),this},t.prototype.eftPayment=function(){return this.endpointUrl=this.endpoint.concat("/api/v1/eftpayments"),this},t.prototype.chdForm=function(t,e){var n=t.querySelectorAll("["+e+"]"),r={};return n.forEach((function(t){r[t.attributes["data-chd"].nodeValue]=t.value})),this.cardHolderName=r.cardHolderName,this.cardNumber=r.cardNumber,this.expDateMonth=r.cardExpiryMonth,this.expDateYear=r.cardExpiryYear,this.cvCode=r.cardCVC,this},t.prototype.paymentForm=function(t,e){var n=t.querySelector("["+e+"]");return this.paymentMethodId=n.value,this},t.prototype.getIbpPaymentMethods=function(){return this.paymentMethodType="ibp",this.endpointUrl=this.paymentMethodApi(),this},t.prototype.getEftPaymentMethods=function(){return this.paymentMethodType="eft",this.endpointUrl=this.paymentMethodApi(),this},t.prototype.getEWalletPaymentMethods=function(){return this.paymentMethodType="ewallet",this.endpointUrl=this.paymentMethodApi(),this},t.prototype.send=function(){var t=this;this.data=this.getRequestData();var e=function(t,e){return{status:t.status,statusText:e}};return new Promise((function(n,r){var i=new XMLHttpRequest;i.open(t.method,t.endpointUrl,!0),i.timeout=t.timeout;var o={"Content-type":"application/json","X-JS-SDK-VERSION":t.version};for(var a in o)o.hasOwnProperty(a)&&i.setRequestHeader(a,o[a]);i.onload=function(){if(i.status>=200&&i.status<300)n(JSON.parse(i.response));else{var t=405===i.status?"Please verify the Worldline Device API URL":i.statusText;r(e(i,t))}},i.onerror=function(){return r(e(i,""===i.statusText?"Could not send transaction.":i.statusText))},i.ontimeout=function(){return r(e(i,i.statusText))},"POST"===t.method?i.send(JSON.stringify(t.data)):"GET"===t.method&&i.send()}))},t.prototype.getRequestData=function(){return{cardHolderName:this.cardHolderName,cardNumber:this.cardNumber,cvCode:this.cvCode,encryptedPayload:this.encryptedPayload,expDateMonth:this.expDateMonth,expDateYear:this.expDateYear,paymentMethodId:this.paymentMethodId,paymentMethodType:this.paymentMethodType,worldlineSessionData:this.worldlineSessionData}},t.prototype.getEndpoint=function(t){if(t.deviceEndpoint){var e=t.deviceEndpoint.indexOf("/api");if(-1!==e)return t.deviceEndpoint.substring(0,e)}return t.deviceEndpoint},t}();e.PaymentService=r}]);